{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid px-4 py-4" x-data="aiToolApp()" x-init="init()">
    {% csrf_token %}

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a href="/?lang={{ g.lang.iso }}">Home</a></li>
            <li class="breadcrumb-item"><a href="/ai-writing-tools/?lang={{ g.lang.iso }}">AI Writing Tools</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ tool.name }}</li>
        </ol>
    </nav>

    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h1 class="h2 fw-bold">{{ tool.name }}</h1>
            <p class="text-muted">{{ tool.description }}</p>
        </div>
    </div>

    <!-- Main Tool Area -->
    <div class="row justify-content-center mb-4">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-sm border-0">
                <div class="card-body p-4">

                    <!-- Input Fields -->
                    <form @submit.prevent="generate()" id="toolForm">
                        {% for field in tool.fields %}
                        <div class="mb-3">
                            <label class="form-label fw-semibold small" for="field_{{ field.name }}">
                                {{ field.label }}
                                {% if field.required %}<span class="text-danger">*</span>{% endif %}
                            </label>

                            {% if field.type == 'textarea' %}
                            <textarea
                                id="field_{{ field.name }}"
                                name="{{ field.name }}"
                                class="form-control"
                                rows="4"
                                placeholder="{{ field.placeholder|default:'' }}"
                                {% if field.required %}required{% endif %}
                                x-model="params['{{ field.name }}']"
                            ></textarea>

                            {% elif field.type == 'select' %}
                            <select
                                id="field_{{ field.name }}"
                                name="{{ field.name }}"
                                class="form-select"
                                {% if field.required %}required{% endif %}
                                x-model="params['{{ field.name }}']"
                            >
                                <option value="">Select...</option>
                                {% for option in field.options %}
                                <option value="{{ option }}">{{ option }}</option>
                                {% endfor %}
                            </select>

                            {% elif field.type == 'number' %}
                            <input
                                type="number"
                                id="field_{{ field.name }}"
                                name="{{ field.name }}"
                                class="form-control"
                                placeholder="{{ field.placeholder|default:'' }}"
                                {% if field.required %}required{% endif %}
                                x-model="params['{{ field.name }}']"
                            >

                            {% else %}
                            <input
                                type="text"
                                id="field_{{ field.name }}"
                                name="{{ field.name }}"
                                class="form-control"
                                placeholder="{{ field.placeholder|default:'' }}"
                                {% if field.required %}required{% endif %}
                                x-model="params['{{ field.name }}']"
                            >
                            {% endif %}
                        </div>
                        {% endfor %}

                        <!-- Tone Selector -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold small" for="field_tone">Tone (optional)</label>
                            <select id="field_tone" name="tone" class="form-select" x-model="params.tone">
                                <option value="">Default</option>
                                <option value="Professional">Professional</option>
                                <option value="Casual">Casual</option>
                                <option value="Friendly">Friendly</option>
                                <option value="Formal">Formal</option>
                                <option value="Persuasive">Persuasive</option>
                                <option value="Informative">Informative</option>
                                <option value="Humorous">Humorous</option>
                                <option value="Empathetic">Empathetic</option>
                                <option value="Authoritative">Authoritative</option>
                                <option value="Conversational">Conversational</option>
                            </select>
                        </div>

                        <!-- Generate Button -->
                        <div class="d-flex align-items-center justify-content-between mt-4">
                            <button
                                type="submit"
                                class="btn btn-primary btn-lg px-5"
                                :disabled="loading"
                            >
                                <span x-show="!loading">Generate</span>
                                <span x-show="loading" x-cloak class="d-flex align-items-center gap-2">
                                    <span class="spinner-border spinner-border-sm"></span>
                                    Generating...
                                </span>
                            </button>

                            {% if not is_premium and remaining >= 0 %}
                            <span class="text-muted small">
                                <span x-text="remaining">{{ remaining }}</span> / {{ limit }} free generations today
                            </span>
                            {% endif %}
                        </div>
                    </form>

                    <!-- Error Message -->
                    <div x-show="error" x-cloak class="alert alert-danger mt-3">
                        <span x-text="error"></span>
                        <template x-if="showUpgrade">
                            <a href="/pricing/?lang={{ g.lang.iso }}" class="alert-link ms-1">Upgrade to Premium</a>
                        </template>
                    </div>

                    <!-- Output -->
                    <div x-show="output" x-cloak class="mt-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h5 class="fw-semibold mb-0">Generated Content</h5>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary btn-sm" @click="copyOutput()">
                                    <span x-show="!copied">Copy</span>
                                    <span x-show="copied">Copied!</span>
                                </button>
                                <button class="btn btn-outline-primary btn-sm" @click="generate()">
                                    Regenerate
                                </button>
                            </div>
                        </div>
                        <div class="card bg-light border-0">
                            <div class="card-body p-3">
                                <div x-html="formatOutput(output)" class="output-content" style="white-space: pre-wrap; line-height: 1.7;"></div>
                            </div>
                        </div>
                        <div class="text-end mt-2">
                            <small class="text-muted" x-text="wordCount + ' words'"></small>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Related Tools -->
    {% if related_tools %}
    <div class="row justify-content-center mt-5 mb-4">
        <div class="col-lg-8 col-md-10">
            <h3 class="h5 fw-bold mb-3">Related Tools</h3>
            <div class="row g-3">
                {% for related in related_tools %}
                <div class="col-md-4 col-6">
                    <a href="/ai-writing-tools/{{ related.slug }}/?lang={{ g.lang.iso }}" class="text-decoration-none">
                        <div class="card h-100 shadow-sm border-0 hover-shadow transition-all">
                            <div class="card-body p-3">
                                <h6 class="card-title fw-semibold text-dark mb-1">{{ related.name }}</h6>
                                <p class="card-text small text-muted mb-0 line-clamp-2">{{ related.description }}</p>
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            <div class="text-center mt-3">
                <a href="/ai-writing-tools/?lang={{ g.lang.iso }}" class="btn btn-outline-primary btn-sm">View All AI Tools</a>
            </div>
        </div>
    </div>
    {% endif %}

    {% if not is_premium %}
    <!-- Upgrade CTA -->
    <div class="row justify-content-center mt-4 mb-4">
        <div class="col-lg-8 col-md-10">
            <div class="card border-0 shadow-sm bg-light text-center">
                <div class="card-body py-4">
                    <h4 class="fw-bold mb-2">Unlimited AI Writing Tools</h4>
                    <p class="text-muted mb-3">Upgrade to Premium for unlimited access to all our AI writing tools, plus paraphrasing, grammar checking, and more.</p>
                    <a href="/pricing/?lang={{ g.lang.iso }}" class="btn btn-primary">Upgrade to Premium</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Why Use Section -->
    <div class="bg-light py-5 mt-4">
        <div class="container">
            <h2 class="text-center fw-bold mb-5">Why Use Our {{ tool.name }}</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm p-4">
                        <h5 class="fw-semibold mb-3">AI-Powered Quality</h5>
                        <p class="text-muted mb-0">Our AI generates high-quality, contextually relevant content tailored to your specific inputs. Every result is unique and crafted to match your requirements.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm p-4">
                        <h5 class="fw-semibold mb-3">Customizable Tone</h5>
                        <p class="text-muted mb-0">Choose from 10 different tones including Professional, Casual, Friendly, Formal, Persuasive, and more. Match the output to your audience and purpose.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm p-4">
                        <h5 class="fw-semibold mb-3">Instant Results</h5>
                        <p class="text-muted mb-0">Generate content in seconds, not hours. Skip the blank page and get a polished starting point that you can refine and make your own.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- How to Use Section -->
    <div class="container py-5">
        <h2 class="text-center fw-bold mb-5">How to Use {{ tool.name }}</h2>
        <div class="row g-4 justify-content-center">
            <div class="col-md-4 text-center">
                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">1</div>
                <h5 class="fw-semibold">Fill In the Details</h5>
                <p class="text-muted">Complete the form fields with your specific requirements. The more detail you provide, the better the output will be.</p>
            </div>
            <div class="col-md-4 text-center">
                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">2</div>
                <h5 class="fw-semibold">Choose Your Tone</h5>
                <p class="text-muted">Select the tone that matches your audience and purpose. From professional to conversational, the right tone makes all the difference.</p>
            </div>
            <div class="col-md-4 text-center">
                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">3</div>
                <h5 class="fw-semibold">Generate & Refine</h5>
                <p class="text-muted">Click Generate to create your content. Copy the result, regenerate for a different version, or edit it to perfectly match your needs.</p>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="container py-5">
        <h2 class="text-center fw-bold mb-5">Frequently Asked Questions</h2>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                Is the generated content unique?
                            </button>
                        </h3>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Yes. Every piece of content is generated fresh based on your specific inputs. The AI creates original text each time, so even if you use the same inputs twice, the results will be different. However, we recommend reviewing and customizing the output to add your personal touch.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                How many times can I use this tool for free?
                            </button>
                        </h3>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Free users get 50 generations per day across all AI writing tools. Each generation counts as one use, including regenerations. Premium subscribers get unlimited access to all 98 AI writing tools with no daily limits.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                Can I edit the generated content?
                            </button>
                        </h3>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Yes. The generated content is meant to be a starting point. You can copy it and edit it freely, or click Regenerate to get a different version. We encourage you to personalize the output to match your voice and specific needs.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                What tones are available?
                            </button>
                        </h3>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                We offer 10 tone options: Professional, Casual, Friendly, Formal, Persuasive, Informative, Humorous, Empathetic, Authoritative, and Conversational. You can also leave the tone as Default to let the AI choose the most appropriate style based on your content type.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                How long does generation take?
                            </button>
                        </h3>
                        <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Most content is generated in 5 to 15 seconds, depending on the length and complexity of the request. Premium subscribers get priority processing for faster results.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                                Is the content SEO-friendly?
                            </button>
                        </h3>
                        <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                The AI generates well-structured content that is naturally SEO-friendly. For best results, include relevant keywords in your input fields. You can also use our dedicated SEO tools for keyword-optimized content like meta descriptions and blog intros.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                                Can I use the content commercially?
                            </button>
                        </h3>
                        <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Yes. All content generated by our AI tools is yours to use however you like, including for commercial purposes such as blog posts, marketing copy, social media content, and business communications.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq8">
                                Does it support multiple languages?
                            </button>
                        </h3>
                        <div id="faq8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                The AI writing tools work best with English content. You can try providing inputs in other languages, but the quality and accuracy of the output may vary. For translation needs, use our dedicated Translator tool.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq9">
                                Is my input data stored?
                            </button>
                        </h3>
                        <div id="faq9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                No. Your inputs are sent to our AI for processing and the generated content is returned to your browser. We do not store, share, or use your input data for any purpose beyond generating the requested content.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq10">
                                What if I do not like the result?
                            </button>
                        </h3>
                        <div id="faq10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Click the Regenerate button to get a completely new version. Each generation produces different results, so you can regenerate until you find content that works for you. Adjusting your input details or tone can also help improve the output.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq11">
                                Are there other AI writing tools available?
                            </button>
                        </h3>
                        <div id="faq11" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                Yes. We have 98 AI writing tools across 11 categories including blog writing, business content, social media, email, academic, creative writing, and more. Visit our AI Writing Tools page to browse all available generators.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq12">
                                Do I need to create an account?
                            </button>
                        </h3>
                        <div id="faq12" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-muted">
                                No. You can use the AI writing tools without creating an account. Free users get 50 generations per day. Creating a free account lets you track your usage, and upgrading to Premium gives you unlimited access to all tools.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.hover-shadow:hover { box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15) !important; transform: translateY(-2px); }
.transition-all { transition: all 0.2s ease; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.output-content h1, .output-content h2, .output-content h3 { font-size: 1.1rem; font-weight: 600; margin-top: 1rem; }
.output-content ul, .output-content ol { padding-left: 1.5rem; }
[x-cloak] { display: none !important; }
</style>

<script src="{% static 'js/ai-tools.js' %}?v={{ g.scripts_version }}"></script>
{% endblock %}
