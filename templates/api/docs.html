{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <!-- Sidebar Navigation -->
        <div class="col-lg-3 d-none d-lg-block">
            <div class="position-sticky" style="top: 80px;">
                <h6 class="text-muted text-uppercase small fw-semibold mb-3">API Reference</h6>
                <nav class="nav flex-column">
                    <a href="#authentication" class="nav-link px-3 py-2 text-dark">Authentication</a>
                    <a href="#rate-limits" class="nav-link px-3 py-2 text-dark">Rate Limits</a>
                    <a href="#errors" class="nav-link px-3 py-2 text-dark">Error Handling</a>
                    <hr class="my-2">
                    <span class="nav-link px-3 py-1 text-muted small fw-semibold">Endpoints</span>
                    <a href="#paraphrase" class="nav-link px-3 py-2 text-dark">Paraphrase</a>
                    <a href="#grammar" class="nav-link px-3 py-2 text-dark">Grammar Check</a>
                    <a href="#summarize" class="nav-link px-3 py-2 text-dark">Summarize</a>
                    <a href="#ai-detect" class="nav-link px-3 py-2 text-dark">AI Detection</a>
                    <a href="#translate" class="nav-link px-3 py-2 text-dark">Translate</a>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-9">
            <h1 class="display-6 fw-bold mb-2">API Documentation</h1>
            <p class="lead text-muted mb-5">
                Integrate paraphrasing, grammar checking, summarization, AI detection, and translation into your applications.
            </p>

            <!-- Base URL -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body p-4">
                    <h6 class="fw-semibold text-muted mb-2">Base URL</h6>
                    <code class="fs-5">https://writingbot.ai/api</code>
                </div>
            </div>

            <!-- Authentication -->
            <div id="authentication" class="mb-5">
                <h2 class="fw-bold mb-3">Authentication</h2>
                <p>All API requests require an API key sent via the <code>X-API-Key</code> header.</p>

                {% if api_token %}
                <div class="alert alert-success">
                    <strong>Your API Key:</strong>
                    <code id="apiKeyDisplay">{{ api_token }}</code>
                    <button class="btn btn-sm btn-outline-success ms-2" onclick="navigator.clipboard.writeText('{{ api_token }}')">Copy</button>
                </div>
                {% else %}
                <div class="alert alert-info">
                    <a href="/login/">Log in</a> or <a href="/signup/">sign up</a> to get your API key.
                </div>
                {% endif %}

                <div class="card bg-dark text-light border-0 mb-3">
                    <div class="card-header border-bottom border-secondary py-2">
                        <small class="text-muted">Example Request Header</small>
                    </div>
                    <div class="card-body p-3">
<pre class="mb-0 text-light"><code>curl -X POST https://writingbot.ai/api/v1/paraphrase/ \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{"text": "Your text here"}'</code></pre>
                    </div>
                </div>
            </div>

            <!-- Rate Limits -->
            <div id="rate-limits" class="mb-5">
                <h2 class="fw-bold mb-3">Rate Limits</h2>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Plan</th>
                                <th>Requests / Hour</th>
                                <th>Word Limit / Request</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Free</td>
                                <td>100</td>
                                <td>500 words</td>
                            </tr>
                            <tr>
                                <td>Premium</td>
                                <td>1,000</td>
                                <td>Unlimited</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="text-muted small">Rate limit headers are included in every response: <code>X-RateLimit-Remaining</code>, <code>X-RateLimit-Reset</code>.</p>
            </div>

            <!-- Error Handling -->
            <div id="errors" class="mb-5">
                <h2 class="fw-bold mb-3">Error Handling</h2>
                <p>Errors return JSON with an <code>error</code> field and an appropriate HTTP status code.</p>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr>
                                <th>Code</th>
                                <th>Meaning</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><code>400</code></td><td>Bad Request -- Missing or invalid parameters</td></tr>
                            <tr><td><code>401</code></td><td>Unauthorized -- Invalid or missing API key</td></tr>
                            <tr><td><code>403</code></td><td>Forbidden -- Limit exceeded (upgrade required)</td></tr>
                            <tr><td><code>429</code></td><td>Too Many Requests -- Rate limit exceeded</td></tr>
                            <tr><td><code>500</code></td><td>Internal Server Error -- Try again later</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="card bg-dark text-light border-0">
                    <div class="card-header border-bottom border-secondary py-2">
                        <small class="text-muted">Error Response Example</small>
                    </div>
                    <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "error": "Free API users are limited to 500 words per request.",
  "upgrade": true
}</code></pre>
                    </div>
                </div>
            </div>

            <hr class="my-5">

            <!-- Paraphrase -->
            <div id="paraphrase" class="mb-5">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-success">POST</span>
                    <h3 class="fw-bold mb-0">/api/v1/paraphrase/</h3>
                </div>
                <p>Paraphrase text with customizable modes and synonym levels.</p>

                <h6 class="fw-semibold mt-4 mb-2">Request Body (JSON)</h6>
                <div class="table-responsive">
                    <table class="table table-bordered small">
                        <thead class="table-light">
                            <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>The text to paraphrase</td></tr>
                            <tr><td><code>mode</code></td><td>string</td><td>No</td><td>standard, fluency, formal, academic, simple, creative, expand, shorten (default: standard)</td></tr>
                            <tr><td><code>synonym_level</code></td><td>integer</td><td>No</td><td>1-5, controls word replacement aggressiveness (default: 3)</td></tr>
                            <tr><td><code>language</code></td><td>string</td><td>No</td><td>ISO language code for output (default: en)</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Request</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "text": "The cat sat on the mat.",
  "mode": "formal",
  "synonym_level": 4
}</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Response (200)</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "output_text": "The feline was seated upon the mat.",
  "input_word_count": 7,
  "output_word_count": 8,
  "mode": "formal"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grammar -->
            <div id="grammar" class="mb-5">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-success">POST</span>
                    <h3 class="fw-bold mb-0">/api/v1/grammar/</h3>
                </div>
                <p>Check text for grammar, spelling, and punctuation errors.</p>

                <h6 class="fw-semibold mt-4 mb-2">Request Body (JSON)</h6>
                <div class="table-responsive">
                    <table class="table table-bordered small">
                        <thead class="table-light">
                            <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>The text to check</td></tr>
                            <tr><td><code>language</code></td><td>string</td><td>No</td><td>ISO language code (default: en)</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Request</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "text": "She dont like apples."
}</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Response (200)</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "corrected_text": "She doesn't like apples.",
  "corrections": [
    {
      "original": "dont",
      "corrected": "doesn't",
      "type": "grammar",
      "message": "Use 'doesn't' with third person singular."
    }
  ],
  "score": 72
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summarize -->
            <div id="summarize" class="mb-5">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-success">POST</span>
                    <h3 class="fw-bold mb-0">/api/v1/summarize/</h3>
                </div>
                <p>Summarize long text into key points or a concise paragraph.</p>

                <h6 class="fw-semibold mt-4 mb-2">Request Body (JSON)</h6>
                <div class="table-responsive">
                    <table class="table table-bordered small">
                        <thead class="table-light">
                            <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>The text to summarize</td></tr>
                            <tr><td><code>mode</code></td><td>string</td><td>No</td><td>"paragraph" or "key_sentences" (default: paragraph)</td></tr>
                            <tr><td><code>length</code></td><td>integer</td><td>No</td><td>Summary length percentage 10-100 (default: 50)</td></tr>
                            <tr><td><code>language</code></td><td>string</td><td>No</td><td>ISO language code (default: en)</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Request</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "text": "Long article text here...",
  "mode": "key_sentences",
  "length": 30
}</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Response (200)</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "summary": "Key point 1. Key point 2.",
  "input_word_count": 450,
  "mode": "key_sentences"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Detection -->
            <div id="ai-detect" class="mb-5">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-success">POST</span>
                    <h3 class="fw-bold mb-0">/api/v1/ai-detect/</h3>
                </div>
                <p>Detect whether text was written by AI or a human.</p>

                <h6 class="fw-semibold mt-4 mb-2">Request Body (JSON)</h6>
                <div class="table-responsive">
                    <table class="table table-bordered small">
                        <thead class="table-light">
                            <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>The text to analyze</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Request</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "text": "Text to analyze..."
}</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Response (200)</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "ai_score": 0.85,
  "label": "Likely AI-generated",
  "sentences": [
    {
      "text": "First sentence.",
      "ai_probability": 0.9
    }
  ]
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Translate -->
            <div id="translate" class="mb-5">
                <div class="d-flex align-items-center gap-2 mb-3">
                    <span class="badge bg-success">POST</span>
                    <h3 class="fw-bold mb-0">/api/v1/translate/</h3>
                </div>
                <p>Translate text between 50+ languages.</p>

                <h6 class="fw-semibold mt-4 mb-2">Request Body (JSON)</h6>
                <div class="table-responsive">
                    <table class="table table-bordered small">
                        <thead class="table-light">
                            <tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>The text to translate</td></tr>
                            <tr><td><code>source_lang</code></td><td>string</td><td>No</td><td>Source language ISO code or "auto" (default: auto)</td></tr>
                            <tr><td><code>target_lang</code></td><td>string</td><td>Yes</td><td>Target language ISO code (e.g. "es", "fr", "de")</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Request</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "text": "Hello, how are you?",
  "target_lang": "es"
}</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-dark text-light border-0">
                            <div class="card-header border-bottom border-secondary py-2"><small class="text-muted">Response (200)</small></div>
                            <div class="card-body p-3">
<pre class="mb-0 text-light"><code>{
  "translated_text": "Hola, como estas?",
  "source_lang": "auto",
  "target_lang": "es",
  "character_count": 19
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SDKs -->
            <div class="mb-5">
                <h2 class="fw-bold mb-3">Code Examples</h2>

                <h6 class="fw-semibold mt-4 mb-2">Python</h6>
                <div class="card bg-dark text-light border-0 mb-3">
                    <div class="card-body p-3">
<pre class="mb-0 text-light"><code>import requests

API_KEY = "YOUR_API_KEY"
BASE_URL = "https://writingbot.ai/api/v1"

response = requests.post(
    f"{BASE_URL}/paraphrase/",
    headers={
        "Content-Type": "application/json",
        "X-API-Key": API_KEY,
    },
    json={
        "text": "The quick brown fox jumps over the lazy dog.",
        "mode": "formal",
        "synonym_level": 3,
    }
)

data = response.json()
print(data["output_text"])</code></pre>
                    </div>
                </div>

                <h6 class="fw-semibold mt-4 mb-2">JavaScript (Node.js)</h6>
                <div class="card bg-dark text-light border-0 mb-3">
                    <div class="card-body p-3">
<pre class="mb-0 text-light"><code>const response = await fetch("https://writingbot.ai/api/v1/paraphrase/", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "X-API-Key": "YOUR_API_KEY",
  },
  body: JSON.stringify({
    text: "The quick brown fox jumps over the lazy dog.",
    mode: "formal",
  }),
});

const data = await response.json();
console.log(data.output_text);</code></pre>
                    </div>
                </div>

                <h6 class="fw-semibold mt-4 mb-2">cURL</h6>
                <div class="card bg-dark text-light border-0">
                    <div class="card-body p-3">
<pre class="mb-0 text-light"><code>curl -X POST https://writingbot.ai/api/v1/grammar/ \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{"text": "She dont like apples."}'</code></pre>
                    </div>
                </div>
            </div>

            <!-- Support -->
            <div class="card border-0 shadow-sm bg-light">
                <div class="card-body text-center p-4">
                    <h5 class="fw-semibold mb-2">Need Help?</h5>
                    <p class="text-muted mb-3">Our team is here to help you integrate our API into your application.</p>
                    <a href="/contact/" class="btn btn-primary">Contact Support</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
