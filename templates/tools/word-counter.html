{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid px-4 py-4" x-data="wordCounterApp()" x-init="init()">

    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h1 class="h2 fw-bold">{{ g.i18n.word_counter|default:"Word Counter" }}</h1>
            <p class="text-muted">{{ g.i18n.word_counter_desc|default:"Count words, characters, sentences, and more in real time" }}</p>
        </div>
    </div>

    <!-- Main Stats Bar -->
    <div class="row mb-3">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-body py-2">
                    <div class="d-flex flex-wrap justify-content-center gap-4">
                        <div class="text-center">
                            <div class="h4 fw-bold mb-0 text-primary" x-text="words"></div>
                            <div class="small text-muted">Words</div>
                        </div>
                        <div class="text-center">
                            <div class="h4 fw-bold mb-0 text-primary" x-text="characters"></div>
                            <div class="small text-muted">Characters</div>
                        </div>
                        <div class="text-center">
                            <div class="h4 fw-bold mb-0 text-primary" x-text="charactersNoSpaces"></div>
                            <div class="small text-muted">Characters (no spaces)</div>
                        </div>
                        <div class="text-center">
                            <div class="h4 fw-bold mb-0 text-primary" x-text="sentenceCount"></div>
                            <div class="small text-muted">Sentences</div>
                        </div>
                        <div class="text-center">
                            <div class="h4 fw-bold mb-0 text-primary" x-text="paragraphCount"></div>
                            <div class="small text-muted">Paragraphs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Text Area -->
        <div class="col-12 col-lg-8 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <span class="fw-semibold">{{ g.i18n.your_text|default:"Your Text" }}</span>
                    <button
                        @click="clearText()"
                        class="btn btn-sm btn-outline-secondary"
                        x-show="text.length > 0"
                    >Clear</button>
                </div>
                <div class="card-body p-0">
                    <textarea
                        x-model="text"
                        @input="analyze()"
                        class="form-control border-0"
                        style="min-height: 500px; resize: vertical; font-size: 1rem; line-height: 1.6;"
                        placeholder="{{ g.i18n.word_counter_placeholder|default:'Type or paste your text here to see detailed statistics...' }}"
                    ></textarea>
                </div>
            </div>
        </div>

        <!-- Stats Sidebar -->
        <div class="col-12 col-lg-4 mb-4">
            <!-- Reading & Speaking Time -->
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-white fw-semibold">Time Estimates</div>
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-1" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1H8a.5.5 0 0 1-.5-.5v-3.5A.5.5 0 0 1 8 4z"/>
                            </svg>
                            Reading Time
                        </span>
                        <span class="fw-semibold" x-text="readingTime"></span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span class="text-muted">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-1" viewBox="0 0 16 16">
                                <path d="M8 3a5 5 0 0 0-5 5v1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V8a6 6 0 1 1 12 0v5a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1V8a5 5 0 0 0-5-5z"/>
                            </svg>
                            Speaking Time
                        </span>
                        <span class="fw-semibold" x-text="speakingTime"></span>
                    </div>
                </div>
            </div>

            <!-- Readability Score -->
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-white fw-semibold">Readability</div>
                <div class="card-body text-center">
                    <div class="position-relative d-inline-flex align-items-center justify-content-center mb-2" style="width: 100px; height: 100px;">
                        <svg width="100" height="100" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="42" fill="none" stroke="#e9ecef" stroke-width="6"/>
                            <circle
                                cx="50" cy="50" r="42" fill="none"
                                :stroke="getReadabilityColor()"
                                stroke-width="6"
                                stroke-linecap="round"
                                :stroke-dasharray="(2 * Math.PI * 42)"
                                :stroke-dashoffset="(2 * Math.PI * 42) * (1 - Math.max(0, Math.min(100, readabilityScore)) / 100)"
                                transform="rotate(-90 50 50)"
                                style="transition: stroke-dashoffset 0.4s ease;"
                            />
                        </svg>
                        <span class="position-absolute fw-bold h5 mb-0" x-text="readabilityScore"></span>
                    </div>
                    <div class="fw-semibold" x-text="readabilityLabel"></div>
                    <div class="small text-muted">Flesch-Kincaid Reading Ease</div>
                </div>
            </div>

            <!-- Social Media Character Limits -->
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-white fw-semibold">Social Media Limits</div>
                <div class="card-body p-0">
                    <table class="table table-sm mb-0">
                        <thead class="table-light">
                            <tr>
                                <th class="small">Platform</th>
                                <th class="small text-center">Limit</th>
                                <th class="small text-end">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="(platform, idx) in socialLimits" :key="idx">
                                <tr>
                                    <td class="small" x-text="platform.name"></td>
                                    <td class="text-center small" x-text="platform.limit.toLocaleString()"></td>
                                    <td class="text-end">
                                        <div class="d-flex align-items-center justify-content-end gap-1">
                                            <div class="progress flex-grow-1" style="height: 6px; max-width: 50px;">
                                                <div
                                                    class="progress-bar"
                                                    :class="characters > platform.limit ? 'bg-danger' : (characters > platform.limit * 0.9 ? 'bg-warning' : 'bg-success')"
                                                    :style="'width: ' + Math.min((characters / platform.limit) * 100, 100) + '%'"
                                                ></div>
                                            </div>
                                            <span class="small" :class="characters > platform.limit ? 'text-danger fw-semibold' : 'text-muted'" x-text="characters + '/' + platform.limit.toLocaleString()"></span>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Top Keywords -->
            <div class="card shadow-sm">
                <div class="card-header bg-white fw-semibold">Top Keywords</div>
                <div class="card-body p-0">
                    <template x-if="keywords.length === 0">
                        <p class="text-muted text-center small p-3 mb-0">Start typing to see keyword density</p>
                    </template>
                    <table class="table table-sm mb-0" x-show="keywords.length > 0">
                        <thead class="table-light">
                            <tr>
                                <th class="small">Keyword</th>
                                <th class="small text-center">Count</th>
                                <th class="small text-end">Density</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="(kw, idx) in keywords" :key="idx">
                                <tr>
                                    <td>
                                        <span class="small" x-text="kw.word"></span>
                                    </td>
                                    <td class="text-center">
                                        <span class="small" x-text="kw.count"></span>
                                    </td>
                                    <td class="text-end">
                                        <div class="d-flex align-items-center justify-content-end gap-1">
                                            <div class="progress flex-grow-1" style="height: 6px; max-width: 60px;">
                                                <div
                                                    class="progress-bar bg-primary"
                                                    :style="'width: ' + Math.min(kw.density * 10, 100) + '%'"
                                                ></div>
                                            </div>
                                            <span class="small" x-text="kw.density + '%'"></span>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Related Tools -->
    <div class="row mt-4">
        <div class="col-12">
            <h2 class="h5 fw-bold mb-3 text-center">Related Tools</h2>
            <div class="row g-3 justify-content-center">
                <div class="col-6 col-md-4">
                    <a href="/character-counter/" class="d-block text-decoration-none text-dark p-3 rounded bg-light text-center h-100">
                        <div class="fw-semibold small mb-1">Character Counter</div>
                        <div class="text-muted" style="font-size: 0.75rem;">Count characters with detailed breakdown</div>
                    </a>
                </div>
                <div class="col-6 col-md-4">
                    <a href="/text-case-converter/" class="d-block text-decoration-none text-dark p-3 rounded bg-light text-center h-100">
                        <div class="fw-semibold small mb-1">Text Case Converter</div>
                        <div class="text-muted" style="font-size: 0.75rem;">Convert text to any case style</div>
                    </a>
                </div>
                <div class="col-6 col-md-4">
                    <a href="/grammar-check/" class="d-block text-decoration-none text-dark p-3 rounded bg-light text-center h-100">
                        <div class="fw-semibold small mb-1">Grammar Checker</div>
                        <div class="text-muted" style="font-size: 0.75rem;">Fix grammar and spelling errors</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Why Use Section -->
<div class="bg-light py-5">
    <div class="container">
        <h2 class="text-center fw-bold mb-5">Why Use Our Word Counter</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">Comprehensive Statistics</h5>
                    <p class="text-muted mb-0">Track words, characters, sentences, paragraphs, and reading time all in one place. Get instant readability scoring with Flesch-Kincaid analysis.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">Social Media Ready</h5>
                    <p class="text-muted mb-0">See exactly how your text fits within Twitter/X, Instagram, Facebook, LinkedIn, and YouTube character limits with real-time progress bars.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">Keyword Density Analysis</h5>
                    <p class="text-muted mb-0">Identify your most-used keywords and their density percentage to optimize SEO content. Perfect for content marketers and copywriters.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- How to Use Section -->
<div class="container py-5">
    <h2 class="text-center fw-bold mb-5">How to Use Word Counter</h2>
    <div class="row g-4 justify-content-center">
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">1</div>
            <h5 class="fw-semibold">Paste Your Text</h5>
            <p class="text-muted">Type directly into the editor or paste text from any document. Word count updates instantly as you type.</p>
        </div>
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">2</div>
            <h5 class="fw-semibold">Review Statistics</h5>
            <p class="text-muted">Check your word count, character count, sentences, paragraphs, readability score, and time estimates in real time.</p>
        </div>
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">3</div>
            <h5 class="fw-semibold">Optimize Content</h5>
            <p class="text-muted">Use keyword density and social media limit trackers to refine your text for SEO and social platforms.</p>
        </div>
    </div>
</div>

<!-- FAQ Section -->
<div class="container py-5">
    <h2 class="text-center fw-bold mb-5">Frequently Asked Questions</h2>
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                            How accurate is the word counter?
                        </button>
                    </h3>
                    <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Our word counter splits text by whitespace and counts each segment, matching the method used by Microsoft Word and Google Docs. It handles multiple spaces, tabs, and line breaks correctly so your count is always accurate.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                            What readability score should I aim for?
                        </button>
                    </h3>
                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            For general web content, aim for a Flesch-Kincaid score between 60 and 70, which corresponds to a 6th-8th grade reading level. Scores above 70 are easy for most readers, while scores below 30 indicate very complex academic writing. Adjust based on your target audience.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                            Does it count hyphenated words as one or two?
                        </button>
                    </h3>
                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Hyphenated words like "well-known" are counted as a single word, which matches the convention used by most word processors and style guides. Compound words without hyphens are counted separately.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                            What is the Twitter/X character limit?
                        </button>
                    </h3>
                    <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Twitter/X allows 280 characters per tweet for free users, or up to 4,000 characters for Premium subscribers. Our word counter includes a real-time Twitter character tracker so you can see exactly how much space you have left.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                            How is reading time calculated?
                        </button>
                    </h3>
                    <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Reading time is based on the average adult reading speed of approximately 238 words per minute, a widely accepted benchmark used by platforms like Medium. Speaking time uses a rate of around 130 words per minute, reflecting a natural presentation pace.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                            What is keyword density and why does it matter?
                        </button>
                    </h3>
                    <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Keyword density is the percentage of times a word appears relative to the total word count. For SEO, keeping primary keyword density between 1% and 3% helps search engines understand your topic without triggering keyword-stuffing penalties.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                            Can I use this for academic writing?
                        </button>
                    </h3>
                    <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes. Our word counter is ideal for essays, research papers, dissertations, and any assignment with strict word count requirements. The tool provides exact counts for words, characters with and without spaces, sentences, and paragraphs.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq8">
                            Is there a word limit for the tool?
                        </button>
                    </h3>
                    <div id="faq8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            No, there is no limit on how much text you can analyze. The counter works entirely in your browser using JavaScript, so it can handle everything from a single sentence to an entire book manuscript with no delay.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq9">
                            Does it work with languages other than English?
                        </button>
                    </h3>
                    <div id="faq9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes, the word counter works with any language that uses space-separated words, including Spanish, French, German, Portuguese, and more. For languages like Chinese or Japanese that do not use spaces between words, character count is more reliable than word count.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq10">
                            What is the Instagram caption character limit?
                        </button>
                    </h3>
                    <div id="faq10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Instagram captions can be up to 2,200 characters, but text is truncated in the feed after about 125 characters. Our tool tracks your text against the Instagram limit in real time so you can craft captions that fit perfectly.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq11">
                            Is the word counter free?
                        </button>
                    </h3>
                    <div id="faq11" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes, our word counter is completely free with no limits. You can count words, characters, and analyze keyword density as many times as you want without creating an account or paying anything.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq12">
                            Does it work on mobile devices?
                        </button>
                    </h3>
                    <div id="faq12" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes, the word counter is fully responsive and works on all smartphones, tablets, and desktop browsers. The interface adjusts to your screen size automatically. No app installation is required.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/word-counter.js' %}?v={{ g.scripts_version }}"></script>
{% endblock %}
