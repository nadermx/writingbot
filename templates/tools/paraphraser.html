{% extends 'base.html' %}
{% load static %}

{% block content %}
<input type="hidden" id="isPremium" value="{{ is_premium|yesno:'true,false' }}">
<input type="hidden" id="freeWordLimit" value="{{ free_word_limit }}">
<input type="hidden" id="freeModes" value='{{ free_modes|join:"," }}'>
{% csrf_token %}

<div class="container-fluid px-3 px-md-5 py-4" x-data="paraphraser()" x-init="init()" x-cloak>

    <!-- Header -->
    <div class="row mb-3">
        <div class="col">
            <h1 class="h3 fw-bold mb-1">{{ g.i18n.paraphraser_title|default:"Paraphrasing Tool" }}</h1>
            <p class="text-muted mb-0">{{ g.i18n.paraphraser_subtitle|default:"Rewrite and rephrase your text with AI-powered modes." }}</p>
        </div>
    </div>

    <!-- Mode Selector Tabs -->
    <div class="row mb-3">
        <div class="col">
            <div class="d-flex flex-wrap gap-2 align-items-center">
                {% for m in all_modes %}
                <button
                    type="button"
                    class="btn btn-sm"
                    :class="mode === '{{ m }}' ? 'btn-primary' : (freeModes.includes('{{ m }}') || isPremium ? 'btn-outline-secondary' : 'btn-outline-secondary opacity-50')"
                    @click="selectMode('{{ m }}')"
                    {% if m not in free_modes and not is_premium %}
                    title="Premium only"
                    {% endif %}
                >
                    {% if m not in free_modes and not is_premium %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/></svg>
                    {% endif %}
                    {{ m|title }}
                </button>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Synonym Slider + Settings Row -->
    <div class="row mb-3">
        <div class="col-auto d-flex align-items-center gap-2">
            <label class="form-label mb-0 fw-semibold small">Synonyms:</label>
            <input
                type="range"
                class="form-range"
                min="1" max="5" step="1"
                x-model="synonymLevel"
                style="width: 140px;"
            >
            <span class="badge bg-secondary" x-text="synonymLevel"></span>
        </div>
        <div class="col-auto ms-auto d-flex align-items-center gap-2">
            <!-- Settings Gear -->
            <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/><path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/></svg>
                    Settings
                </button>
                <div class="dropdown-menu p-3" style="min-width: 260px;">
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="settContractions" x-model="paraphraseSettings.use_contractions">
                        <label class="form-check-label small" for="settContractions">Use contractions</label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="settActiveVoice" x-model="paraphraseSettings.active_voice">
                        <label class="form-check-label small" for="settActiveVoice">Prefer active voice</label>
                    </div>
                    <hr class="my-2">
                    <div class="mb-2" x-show="mode === 'custom'">
                        <label class="form-label small fw-semibold mb-1">Custom instructions:</label>
                        <textarea class="form-control form-control-sm" rows="3" x-model="paraphraseSettings.custom_instructions" placeholder="e.g., Make it sound like a news article..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Upload Button -->
            <label class="btn btn-sm btn-outline-secondary mb-0" for="fileUpload">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg>
                Upload
            </label>
            <input type="file" id="fileUpload" class="d-none" accept=".txt,.docx" @change="handleFileUpload($event)">
        </div>
    </div>

    <!-- Split Pane Editor -->
    <div class="row g-3 mb-3">
        <!-- Input Pane -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center py-2">
                    <span class="fw-semibold small">Original Text</span>
                    <span class="text-muted small"><span x-text="inputWordCount"></span> words</span>
                </div>
                <div class="card-body p-0">
                    <textarea
                        class="form-control border-0 rounded-0"
                        style="min-height: 400px; resize: vertical; font-size: 0.95rem;"
                        placeholder="Enter or paste your text here..."
                        x-model="inputText"
                        @input="updateInputWordCount()"
                    ></textarea>
                </div>
                <div class="card-footer d-flex justify-content-between align-items-center py-2">
                    <button class="btn btn-sm btn-outline-danger" @click="inputText = ''; outputHtml = ''; outputText = ''; diffHtml = ''; showDiff = false; compareResults = []; updateInputWordCount(); frozenWords = [];" x-show="inputText.length > 0">
                        Clear
                    </button>
                    <div class="d-flex align-items-center gap-2">
                        <small class="text-muted" x-show="!isPremium && inputWordCount > freeWordLimit" style="color: #dc3545 !important;">
                            Exceeds free limit of <span x-text="freeWordLimit"></span> words
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Output Pane -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center py-2">
                    <span class="fw-semibold small">Paraphrased Text</span>
                    <span class="text-muted small"><span x-text="outputWordCount"></span> words</span>
                </div>
                <div class="card-body p-0 position-relative">
                    <!-- Loading overlay -->
                    <div x-show="isLoading" class="position-absolute top-0 start-0 w-100 h-100 align-items-center justify-content-center" :class="isLoading && 'd-flex'" style="background: rgba(255,255,255,0.85); z-index: 10;">
                        <div class="text-center">
                            <div class="spinner-border text-primary mb-2" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <div class="small text-muted">Paraphrasing...</div>
                        </div>
                    </div>

                    <!-- Output with optional diff highlighting -->
                    <div
                        class="p-3"
                        style="min-height: 400px; font-size: 0.95rem; line-height: 1.7; overflow-y: auto; cursor: default;"
                        x-html="showDiff ? diffHtml : (outputHtml || '<span class=\'text-muted\'>Your paraphrased text will appear here...</span>')"
                        @click="handleOutputClick($event)"
                    ><span class="text-muted">Your paraphrased text will appear here...</span></div>

                    <!-- Synonym Popup -->
                    <div
                        x-show="synonymPopup.visible"
                        x-transition
                        class="position-absolute bg-white border rounded shadow-sm p-2"
                        :style="'left:' + synonymPopup.x + 'px; top:' + synonymPopup.y + 'px; z-index: 20; min-width: 150px;'"
                        @click.outside="synonymPopup.visible = false"
                    >
                        <div class="small fw-semibold mb-1 text-muted" x-text="'Synonyms for: ' + synonymPopup.word"></div>
                        <div x-show="synonymPopup.loading" class="text-center py-2">
                            <div class="spinner-border spinner-border-sm text-primary" role="status"></div>
                        </div>
                        <template x-for="syn in synonymPopup.synonyms" :key="syn">
                            <button class="btn btn-sm btn-outline-primary d-block w-100 text-start mb-1" @click="replaceSynonym(syn)" x-text="syn"></button>
                        </template>
                        <div x-show="!synonymPopup.loading && synonymPopup.synonyms.length === 0" class="small text-muted">No synonyms found.</div>
                    </div>
                </div>
                <div class="card-footer d-flex justify-content-between align-items-center py-2">
                    <div class="d-flex align-items-center gap-2" x-show="outputText.length > 0">
                        <button
                            class="btn btn-sm"
                            :class="showDiff ? 'btn-success' : 'btn-outline-success'"
                            @click="toggleDiff()"
                            title="Toggle color-coded diff view"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>
                            <span x-text="showDiff ? 'Diff On' : 'Show Diff'"></span>
                        </button>
                    </div>
                    <button class="btn btn-sm btn-outline-secondary" @click="copyOutput()" x-show="outputText.length > 0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
                        <span x-text="copyLabel">Copy</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share CTA -->
    <div x-show="outputText.length > 0" x-cloak>
        {% include 'shared/share-cta.html' %}
    </div>

    <!-- Freeze Words UI -->
    <div class="row mb-3" x-show="inputText.length > 0">
        <div class="col">
            <div class="card">
                <div class="card-header py-2 d-flex justify-content-between align-items-center">
                    <span class="fw-semibold small">Freeze Words <span class="text-muted fw-normal">(click words to lock them from being changed)</span></span>
                    <button class="btn btn-sm btn-outline-secondary" @click="frozenWords = []" x-show="frozenWords.length > 0">Clear All</button>
                </div>
                <div class="card-body py-2" style="max-height: 120px; overflow-y: auto;">
                    <div class="d-flex flex-wrap gap-1">
                        <template x-for="word in uniqueInputWords" :key="word">
                            <span
                                class="badge cursor-pointer user-select-none"
                                :class="frozenWords.includes(word) ? 'bg-primary' : 'bg-light text-dark border'"
                                @click="toggleFreezeWord(word)"
                                x-text="word"
                                style="cursor: pointer; font-size: 0.8rem;"
                            ></span>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Paraphrase Button + Compare Button -->
    <div class="row mb-4">
        <div class="col text-center d-flex justify-content-center gap-3 flex-wrap">
            <button
                class="btn btn-primary btn-lg px-5"
                @click="paraphrase()"
                :disabled="isLoading || isComparing || inputText.trim().length === 0"
            >
                <span x-show="isLoading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                <span x-text="isLoading ? 'Paraphrasing...' : 'Paraphrase'"></span>
            </button>
            <button
                class="btn btn-outline-primary btn-lg px-4"
                @click="compareParaphrase()"
                :disabled="isLoading || isComparing || inputText.trim().length === 0"
                x-show="outputText.length > 0"
                x-transition
            >
                <span x-show="isComparing" class="spinner-border spinner-border-sm me-2" role="status"></span>
                <svg x-show="!isComparing" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h5a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9H2a2 2 0 0 1-2-2V2zm5.354 7.146a.5.5 0 0 0-.708.708l2 2a.5.5 0 0 0 .708 0l4-4a.5.5 0 0 0-.708-.708L7 10.793 5.354 9.146z"/></svg>
                <span x-text="isComparing ? 'Comparing...' : 'Compare Modes'"></span>
            </button>
        </div>
    </div>

    <!-- Compare Results Section -->
    <div class="row mb-4" x-show="compareResults.length > 0" x-transition>
        <div class="col">
            <div class="card">
                <div class="card-header py-2 d-flex justify-content-between align-items-center">
                    <span class="fw-semibold small">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-1" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h5a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9H2a2 2 0 0 1-2-2V2z"/></svg>
                        Compare Results <span class="text-muted fw-normal">-- pick the version you prefer</span>
                    </span>
                    <button class="btn btn-sm btn-outline-secondary" @click="compareResults = []">
                        Close
                    </button>
                </div>
                <div class="card-body p-0">
                    <div class="row g-0">
                        <template x-for="(cr, crIdx) in compareResults" :key="crIdx">
                            <div class="col-md-4" :class="crIdx < 2 ? 'border-end' : ''">
                                <div class="p-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span class="badge bg-primary" x-text="cr.mode.charAt(0).toUpperCase() + cr.mode.slice(1)"></span>
                                        <span class="text-muted small" x-text="cr.wordCount + ' words'"></span>
                                    </div>
                                    <div class="small" style="line-height: 1.7; max-height: 300px; overflow-y: auto;" x-text="cr.text"></div>
                                    <div class="mt-2 d-flex gap-2">
                                        <button class="btn btn-sm btn-primary" @click="useCompareResult(crIdx)">
                                            Use This
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" @click="copyCompareResult(crIdx)">
                                            <span x-text="cr.copyLabel || 'Copy'"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Alert -->
    <div class="row mb-3" x-show="errorMessage" x-transition>
        <div class="col-md-8 mx-auto">
            <div class="alert alert-danger d-flex align-items-center" role="alert">
                <div class="flex-grow-1" x-text="errorMessage"></div>
                <template x-if="showUpgrade">
                    <a href="/pricing/" class="btn btn-sm btn-warning ms-3">Upgrade</a>
                </template>
                <button type="button" class="btn-close ms-2" @click="errorMessage = ''; showUpgrade = false;"></button>
            </div>
        </div>
    </div>

    <!-- Premium History Section -->
    {% if is_premium %}
    <div class="row mt-4" x-show="historyItems.length > 0">
        <div class="col">
            <div class="card">
                <div class="card-header py-2 d-flex justify-content-between align-items-center">
                    <span class="fw-semibold small">Recent History</span>
                    <button class="btn btn-sm btn-outline-secondary" @click="loadHistory()">Refresh</button>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm table-hover mb-0">
                            <thead>
                                <tr>
                                    <th class="small">Date</th>
                                    <th class="small">Mode</th>
                                    <th class="small">Words</th>
                                    <th class="small">Input Preview</th>
                                    <th class="small">Output Preview</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template x-for="item in historyItems" :key="item.id">
                                    <tr style="cursor: pointer;" @click="loadFromHistory(item)">
                                        <td class="small text-muted" x-text="new Date(item.created_at).toLocaleDateString()"></td>
                                        <td><span class="badge bg-secondary" x-text="item.mode"></span></td>
                                        <td class="small" x-text="item.word_count"></td>
                                        <td class="small text-truncate" style="max-width: 250px;" x-text="item.input_text"></td>
                                        <td class="small text-truncate" style="max-width: 250px;" x-text="item.output_text"></td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</div>

<style>
    .diff-added {
        background-color: #d4edda;
        border-radius: 2px;
        padding: 0 2px;
    }
    .diff-removed {
        background-color: #f8d7da;
        text-decoration: line-through;
        border-radius: 2px;
        padding: 0 2px;
        opacity: 0.6;
    }
    .diff-unchanged {
        padding: 0 1px;
    }
    .output-word {
        cursor: pointer;
        border-radius: 2px;
        padding: 0 1px;
        transition: background-color 0.15s;
    }
    .output-word:hover {
        background-color: #e2e6ea;
    }
</style>

<!-- Why Use Section -->
<div class="bg-light py-5">
    <div class="container">
        <h2 class="text-center fw-bold mb-5">Why Use Our Paraphrasing Tool</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">7 Paraphrasing Modes</h5>
                    <p class="text-muted mb-0">Choose from Standard, Fluency, Formal, Academic, Creative, Shorten, and Custom modes. Each mode is tailored for different writing contexts, from casual emails to scholarly papers.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">Smart Word Freezing</h5>
                    <p class="text-muted mb-0">Lock specific words or phrases so they stay unchanged during paraphrasing. Perfect for preserving brand names, technical terminology, and proper nouns.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm p-4">
                    <h5 class="fw-semibold mb-3">Side-by-Side Comparison</h5>
                    <p class="text-muted mb-0">Compare the original and paraphrased text with color-coded diff highlighting. See exactly what changed with added text in green and removed text in red.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- How to Use Section -->
<div class="container py-5">
    <h2 class="text-center fw-bold mb-5">How to Use Paraphrasing Tool</h2>
    <div class="row g-4 justify-content-center">
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">1</div>
            <h5 class="fw-semibold">Enter Your Text</h5>
            <p class="text-muted">Paste or type your text in the left panel. Upload TXT or DOCX files directly for convenience.</p>
        </div>
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">2</div>
            <h5 class="fw-semibold">Choose Mode & Settings</h5>
            <p class="text-muted">Select a paraphrasing mode, adjust the synonym level, and freeze any words you want to keep unchanged.</p>
        </div>
        <div class="col-md-4 text-center">
            <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-3" style="width:48px;height:48px;font-size:1.25rem;font-weight:700;">3</div>
            <h5 class="fw-semibold">Paraphrase & Compare</h5>
            <p class="text-muted">Click Paraphrase to get your rewritten text. Use the Compare Modes feature to see results from multiple modes side by side.</p>
        </div>
    </div>
</div>

<!-- FAQ Section -->
<div class="container py-5">
    <h2 class="text-center fw-bold mb-5">Frequently Asked Questions</h2>
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                            What paraphrasing modes are available?
                        </button>
                    </h3>
                    <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            We offer seven modes: Standard (balanced rewording), Fluency (smoother sentence flow), Formal (professional tone), Academic (scholarly language), Creative (expressive rewording), Shorten (concise version), and Custom (your own instructions). Free users get Standard, Fluency, and Formal.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                            Is paraphrasing considered plagiarism?
                        </button>
                    </h3>
                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            No, paraphrasing is a legitimate writing technique when done properly. Our tool helps you express ideas in your own words while maintaining the original meaning. Always cite your sources when paraphrasing someone else's work for academic or published writing.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                            How does the synonym slider work?
                        </button>
                    </h3>
                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            The synonym level slider controls how aggressively the tool replaces words with synonyms, on a scale from 1 to 5. Level 1 keeps most original words and changes only sentence structure. Level 5 replaces the maximum number of words with synonyms for a more thoroughly reworded result.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                            What is the word limit for free users?
                        </button>
                    </h3>
                    <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Free users can paraphrase up to 500 words per request. Premium subscribers have an extended word limit and access to all seven paraphrasing modes, including Academic, Creative, Shorten, and Custom.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                            What does the Freeze Words feature do?
                        </button>
                    </h3>
                    <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Freeze Words lets you lock specific words so they are never changed during paraphrasing. This is useful for brand names, technical terms, proper nouns, or any word you want to keep exactly as written. Simply click a word to freeze it.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                            Can I compare different paraphrasing modes?
                        </button>
                    </h3>
                    <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes. After paraphrasing, click the Compare Modes button to see your text rewritten in three different modes side by side. You can then choose the version you prefer and use it with a single click.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                            Does the diff view show all changes?
                        </button>
                    </h3>
                    <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes, the diff view highlights every change between your original text and the paraphrased version. Added words appear in green and removed words appear in red with a strikethrough, making it easy to review every edit.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq8">
                            Can I upload documents for paraphrasing?
                        </button>
                    </h3>
                    <div id="faq8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Yes, you can upload TXT and DOCX files directly. The tool extracts the text from your document and places it in the input area so you can paraphrase without manual copying and pasting.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq9">
                            How is this different from QuillBot?
                        </button>
                    </h3>
                    <div id="faq9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            WritingBot offers a similar set of paraphrasing modes with the added benefit of word freezing, side-by-side mode comparison, and integrated synonym suggestions. Our tool also works alongside 20+ other writing tools on the same platform.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq10">
                            Does it support languages other than English?
                        </button>
                    </h3>
                    <div id="faq10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            The paraphraser works best with English text. Some modes may produce acceptable results for other languages, but the tool is optimized for English grammar, vocabulary, and sentence structure.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq11">
                            What does the Custom mode do?
                        </button>
                    </h3>
                    <div id="faq11" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            Custom mode lets you provide specific instructions for how you want the text rewritten. For example, you can say "make it sound like a news article" or "rewrite for a 10-year-old audience." This mode is available to Premium subscribers.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-2">
                    <h3 class="accordion-header">
                        <button class="accordion-button collapsed fw-semibold" type="button" data-bs-toggle="collapse" data-bs-target="#faq12">
                            Is my text stored or shared?
                        </button>
                    </h3>
                    <div id="faq12" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body text-muted">
                            No. Your text is sent to our AI for processing and returned to your browser immediately. We do not store, share, or use your text for any purpose beyond generating the paraphrased result.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/paraphraser.js' %}?v={{ g.scripts_version }}"></script>
{% endblock %}
